#!/bin/bash
#PBS -N PLIP_all 
#PBS -q default
#PBS -l nodes=1:ppn=16
#PBS -l walltime=6:00:00
cd $PBS_O_WORKDIR
source /optnfs/common/miniconda3/etc/profile.d/conda.sh
conda activate py27

arr=(1A3K 1A78 1AFA 1AFB 1AX0 1AX1 1AX2 1AXZ 1BCH 1BCJ 1BOS 1BQP 1BWU 1BXH 1BZW 1C1L 1C39 1C3M 1C3N 1C4Q 1CIW 1CJP 1CQF 1CR7 1CT1 1CVN 1D0H 1D1I 1D1K 1DBN 1DFQ 1DGL 1DIW 1DJR 1DLL 1DQO 1DZQ 1E9L 1EEF 1EEI 1EFI 1EHH 1EN2 1ENM 1F31 1F9K 1FAY 1FNZ 1FV2 1FV3 1FWU 1FWV 1FYU 1G1R 1G1S 1G1T 1G8Z 1G9F 1GAN 1GIC 1GSL 1GYK 1GZ9 1GZC 1GZT 1GZW 1HGE 1HGG 1HGH 1HGI 1HGJ 1HJV 1HJW 1HKD 1HLC 1HQL 1HWM 1HWN 1HWO 1HWP 1I3H 1IIY 1IS3 1IS4 1IUC 1J4U 1J8R 1JAC 1JC9 1JLX 1JOT 1JPC 1JXN 1JZN 1K12 1K7T 1K7U 1K7V 1K9I 1K9J 1KIU 1KJ1 1KJL 1KJR 1KLF 1KQR 1KUJ 1KWU 1KWV 1KWW 1KWX 1KWY 1KWZ 1KX0 1KX1 1KZA 1KZB 1KZC 1KZD 1KZE 1LED 1LEM 1LES 1LGB 1LGC 1LOA 1LOB 1LOC 1LOD 1LOF 1LOG 1LTA 1LTE 1LTT 1LU1 1LU2 1M26 1M6P 1MQM 1MQN 1MSA 1MUQ 1MVQ 1N3O 1N3P 1N3Q 1N47 1NIV 1NPL 1NWS 1NWT 1NWU 1O9V 1O9W 1OD7 1OD9 1ODA 1OFS 1OFZ 1OIO 1OKO 1ONA 1OQL 1OUR 1OVP 1OVS 1OXC 1PTO 1PUM 1PUU 1PWB 1Q8O 1Q8P 1Q8Q 1Q8V 1QDC 1QDO 1QF3 1QFO 1QGL 1QKQ 1QNU 1QOO 1QOS 1QOT 1RDI 1RDJ 1RDK 1RDL 1RDM 1RDN 1RIN 1RV0 1RVT 1RVX 1RVZ 1RZO 1SBD 1SBE 1SBF 1SE3 1SE4 1SFY 1SID 1SIE 1SL4 1SL5 1SL6 1SLA 1SLB 1SLC 1SLT 1SYO 1SZ0 1T0W 1TEI 1TFM 1TL2 1TLG 1TOQ 1TP8 1TR7 1TYU 1TYW 1TYX 1UGW 1UGX 1UGY 1UH0 1UH1 1UKG 1ULC 1ULD 1ULE 1ULF 1ULG 1ULM 1UQX 1URL 1UWF 1UXA 1UXB 1UZV 1UZY 1V00 1V6I 1V6J 1V6K 1V6L 1VAL 1VAM 1VBO 1VBP 1VPS 1W3A 1W3F 1W3G 1W6M 1W6O 1W6P 1W8F 1W8H 1WBL 1WGC 1WLD 1WLW 1WMZ 1WS4 1WS5 1WW4 1WW5 1WW6 1X1V 1XEZ 1XXR 1Y2U 1Y2V 1Y2W 1Y2X 1YF8 1YYN 1ZGS 1ZHS 1ZK5 1ZPL 2AAI 2AR6 2ARB 2ARE 2ARX 2AUY 2B7Y 2BMZ 2BN0 2BOI 2BOJ 2BOS 2BP6 2BQP 2BS5 2BS6 2BS7 2BS8 2BSB 2BSC 2BT9 2BV4 2BVE 2BWM 2C25 2C4D 2C5C 2CCV 2CGY 2CGZ 2CHB 2CL8 2CWG 2CY6 2CYF 2D3S 2D6M 2D6N 2D6O 2D6P 2D7F 2DF3 2DRZ 2DS0 2DTW 2DTY 2DU0 2DU1 2DUQ 2DUR 2DV9 2DVA 2DVB 2DVD 2DVG 2E51 2E53 2E6V 2E7Q 2E7T 2EAK 2EAL 2EF6 2FMD 2G5R 2G7C 2GAL 2GGU 2GGX 2GMM 2GMP 2GN3 2GN7 2GUC 2GUD 2GUE 2HRL 2HYQ 2HYR 2I2S 2IHO 2IT5 2IT6 2J0G 2J0Y 2J3F 2J3O 2J3U 2J5Z 2J60 2J61 2JDH 2JDK 2JDM 2JDN 2JDP 2JDU 2JDY 2JDZ 2JE7 2JE9 2JEC 2JH7 2JHD 2JHI 2JHK 2JHL 2K46 2KMB 2KR2 2LIQ 2LL4 2MSB 2N7B 2NMN 2NMO 2NN8 2NU5 2NUO 2O2L 2OBS 2OBT 2OFD 2OFE 2ORJ 2OVU 2OW4 2OX9 2P2K 2P34 2P37 2P3I 2P3J 2P3K 2PEL 2PHF 2PHR 2PHT 2PHU 2PHW 2PHX 2PYS 2R0H 2R61 2RDG 2RDK 2RFT 2RFU 2RIA 2RIB 2RIC 2RID 2RIE 2RL8 2RL9 2RLB 2SBA 2TEP 2UVO 2VCO 2VJJ 2VMC 2VMD 2VNV 2VU9 2VUC 2VUD 2VUZ 2VXJ 2W95 2W9L 2WBV 2WBW 2WGC 2WGT 2WGU 2WKK 2WN2 2WN3 2WQ4 2WR9 2WRA 2WSV 2WT0 2WT1 2WT2 2WYF 2X2T 2X3T 2X52 2X6W 2X6X 2X6Y 2X85 2XBO 2XG3 2XJP 2XJR 2XJS 2XJT 2XJU 2XJV 2XR5 2XR6 2XRQ 2XRS 2Y9G 2YHH 2YIO 2YIP 2YMZ 2YXS 2YY1 2Z48 2Z49 2Z8L 2ZG1 2ZG3 2ZGM 2ZGN 2ZGO 2ZHK 2ZHL 2ZHM 2ZHN 2ZKN 2ZL6 2ZL7 2ZMK 2ZML 2ZMN 2ZOE 2ZQN 2ZQO 2ZX2 2ZX3 2ZX4 3A0D 3A0E 3AFK 3AH1 3AH2 3AH4 3AIH 3AJ5 3AJ6 3AJY 3AJZ 3AK0 3ALT 3ALU 3AP4 3AP6 3AP7 3AP9 3ASP 3ASQ 3ASR 3ASS 3AST 3AX4 3AYA 3AYD 3AYE 3BWR 3CA1 3CA3 3CA4 3CA5 3CA6 3CAH 3CHB 3CL5 3CQO 3D26 3D4K 3DCQ 3DWP 3DWQ 3DZW 3E6J 3EF2 3EFX 3F53 3F5A 3F5E 3F64 3F6J 3FFO 3GAL 3GXY 3GXZ 3HMY 3HN1 3HP8 3HTP 3HTQ 3HTT 3I27 3I8T 3IKN 3IKQ 3IKR 3K41 3KMB 3LEG 3LEI 3LEK 3LL2 3LLZ 3LM1 3LSE 3M2M 3M3C 3M3E 3M3O 3M3Q 3M5H 3M5I 3M5J 3M7J 3MCY 3MIT 3MIU 3N0I 3N35 3N36 3NBC 3NBD 3NBE 3NV2 3NV3 3NV4 3NXD 3O0W 3O0X 3OBT 3ONY 3OY8 3OYW 3P5D 3P5E 3P5G 3P5H 3P5I 3P7G 3P7H 3PA1 3PA2 3PAK 3PAQ 3PHZ 3PUN 3PVD 3Q38 3Q39 3Q3A 3QDT 3QDU 3QDV 3QDW 3QDX 3QDY 3QLQ 3R4S 3R51 3R52 3R6K 3RS6 3S5X 3SEJ 3SH3 3SIS 3SIT 3SLD 3SLN 3T1L 3T1M 3T2T 3TAY 3TB0 3TH0 3U4X 3UBE 3UBJ 3UBN 3UBQ 3UJQ 3VKL 3VKM 3VKO 3VV1 3VY6 3VY7 3VYK 3VZE 3VZF 3VZG 3W9T 3WCS 3WG1 3WG3 3WG4 3WLU 3WMP 3WMQ 3WMV 3WOG 3WUC 3WUD 3WV0 3ZDV 3ZI8 3ZL1 3ZL2 3ZNK 3ZNL 3ZNM 3ZP1 3ZP2 3ZP3 3ZP6 3ZPB 3ZSJ 3ZVX 3ZW0 3ZW1 3ZW2 3ZWE 3ZXE 3ZYB 3ZYF 3ZYH 3ZYR 3ZZV 4A3X 4A6S 4AF9 4AFA 4AFC 4AGI 4AGT 4AH4 4AHA 4AKB 4AKC 4AL9 4AML 4AOC 4ASL 4ATT 4AUJ 4AUY 4AV0 4AV4 4AV5 4AVH 4AVI 4AVJ 4AVK 4B15 4B16 4B4Q 4B4R 4B8V 4B9H 4BGX 4BGY 4BH0 4BH1 4BH3 4BH4 4BLI 4BLJ 4BM8 4BMB 4BME 4BSB 4BSC 4BSD 4BSE 4BSF 4BSH 4BSI 4BUQ 4C1Y 4C9F 4CA4 4CAJ 4CE8 4COU 4COV 4COW 4COY 4COZ 4CP0 4CP1 4CP2 4CP9 4CPB 4CQQ 4CQR 4CQU 4CQW 4CQX 4CQY 4CQZ 4CSD 4CSS 4CST 4CSY 4D00 4D3W 4D4U 4D52 4D62 4D63 4DDN 4DEN 4DRV 4DS0 4E52 4EB2 4END 4F8L 4F8N 4F8O 4F8P 4FBV 4FMH 4FMI 4FMJ 4G1R 4G9N 4GA9 4GAL 4GC1 4GC2 4GK9 4GKX 4GKY 4GWI 4GWJ 4GX7 4H55 4HMG 4HR6 4I4S 4I4U 4I4V 4I4X 4I4Y 4I6S 4IYB 4IZX 4J2S 4JC1 4JCF 4JCK 4JKX 4JNO 4K1Y 4K1Z 4K5U 4K79 4KBB 4KMB 4KZV 4L8Q 4L92 4L97 4LBJ 4LBK 4LBL 4LBM 4LBN 4LBO 4LEA 4LED 4LHK 4LHN 4LJH 4LK6 4LK7 4LO1 4LO2 4LO3 4LO5 4LO6 4LOV 4M18 4M1U 4M7F 4MBY 4MBZ 4MJ0 4MQ0 4N32 4N33 4N34 4N35 4N36 4N37 4N38 4NDU 4NDV 4NFD 4NO4 4NOT 4OIT 4OIZ 4OJL 4OJO 4OJP 4OP7 4OPO 4OPS 4OWK 4OWL 4P14 4P1V 4P25 4P26 4P2N 4P3I 4P6A 4P8V 4P8X 4PIK 4PIT 4POR 4POS 4POT 4Q1P 4Q1R 4Q26 4Q27 4Q2F 4Q4X 4Q4Y 4Q56 4R6N 4R6O 4R6P 4R6Q 4R6R 4R9A 4R9B 4R9C 4R9D 4R9J 4RDK 4RDL 4RGA 4RHS 4RL7 4RM0 4RUS 4TKC 4TQK 4TQM 4U2A 4U36 4U60 4U61 4U62 4UP4 4URR 4USO 4UT5 4UW3 4UW4 4UW5 4UW6 4WEI 4WMY 4WRF 4WUX 4WV8 4WVV 4WVW 4WZE 4WZK 4WZL 4WZT 4X05 4X06 4X07 4X0C 4X0Z 4X10 4X11 4X12 4X13 4X14 4X15 4X16 4X50 4X5P 4X5Q 4X5R 4XBL 4XBN 4XBQ 4XKW 4XL8 4XLA 4XLE 4XLF 4XM3 4XMY 4XN3 4XO8 4XOB 4XOC 4XOE 4XOP 4XOR 4XOT 4XR6 4XRE 4XTM 4XTP 4Y1U 4Y1V 4Y1X 4Y1Y 4Y1Z 4Y20 4Y22 4Y24 4Y26 4YEJ 4YEL 4YFZ 4YG0 4YG6 4YLZ 4YM0 4YM1 4YM2 4YM3 4YMD 4YW6 4YW7 4YWA 4Z2Q 4Z2S 4Z3E 4Z3F 4Z3G 4Z3H 4Z4R 4Z4S 4Z4T 4Z4U 4Z4V 4Z4W 4Z4Y 4Z4Z 4Z8B 4Z8S 4Z9W 4ZA3 4ZBV 4ZES 4ZET 4ZFU 4ZFW 4ZFY 4ZGR 4ZH7 4ZLB 4ZNO 4ZNQ 4ZNR 4ZRV 4ZRW 5A3L 5A3M 5A3O 5A6X 5A6Y 5A6Z 5AAL 5AAP 5AB1 5ABZ 5AJB 5AJC 5AV7 5AVA 5B1X 5BNN 5BNO 5BNP 5BOA 5BP5 5BQU 5C2N 5C9P 5CB7 5CBL 5CNA 5CPW 5CPX 5CPY 5CPZ 5CQ0 5D21 5D2A 5D9Z 5DG1 5DG2 5DUV 5DUW 5DUX 5E88 5E89 5E8A 5EGC 5ELB 5ELC 5ELD 5ELE 5ELF 5EO7 5EO8 5EQ3 5EWS 5EXO 5EYX 5EYY 5F2F 5F3F 5F5Q 5F7M 5F7N 5F7W 5F7Y 5F8R 5F8W 5F8Y 5F90 5F93 5F97 5F9A 5F9D 5FS5 5FSB 5FSC 5FWR 5G3L 5G6U 5GAL 5GLT 5GLU 5GLW 5GLZ 5GM0 5GVY 5GZD 5GZE 5GZF 5GZG 5H47 5H4S 5H9P 5H9Q 5H9R 5H9S 5HCA 5HCF 5HCH 5HMG 5HZA 5HZB 5I4D 5IDA 5IDB 5IIY 5IJ1 5IJ3 5IK5 5IK8 5IUC 5IYP 5IYQ 5IYR 5IYW 5J06 5J0B 5J35 5J3O 5J4T 5J4X 5J50 5J51 5J6Y 5JCQ 5JCR 5JM1 5JPG 5JPV 5JQ1 5KIQ 5KTH 5KTI 5KXB 5KXC 5KXD 5KXE 5L4T 5LF5 5LFE 5LFV 5LKC 5LKG 5LKK 5LN8 5LNE 5M62 5M6O 5MAY 5MAZ 5MB1 5MB4 5MH1 5MIH 5MTS 5MUC 5MXC 5MXF 5MXG 5MXH 5MZ9 5MZB 5MZD 5N0B 5N0C 5N7M 5NC1 5NES 5NEY 5NF0 5NF7 5NF9 5NFA 5NFB 5NLD 5NLE 5NLH 5NM1 5NMJ 5NNW 5NO9 5O7U 5O7V 5O7W 5ODU 5OFI 5OFX 5T20 5T52 5T54 5T55 5T5J 5T5L 5T5O 5T5P 5T7I 5T7P 5T7S 5T7T 5TG3 5TPC 5TQZ 5U38 5UUY 5V6F 5V6K 5VKI 5VKS 5VX5 5VX9 5VYB 5WEY 5WHT 5WHU 5X4A 5XFD 5XFH 5XFI 5XG5 5XO2 5XOF 5Y96 5Y97 5YMS 5YMT 5YRF 5YRG 5YRI 5YRJ 5YRL 5YRM 5ZHO 5ZV5 5ZV7 5ZVC 6A1T 6A56 6A62 6A63 6A64 6A87 6AOX 6ARM 6ARN 6ARO 6AS8 6B8K 6B94 6CJ9 6F5W 6F6Y 6FHX 6FHY 6FK2 6FLU 6FLY 6FLZ 6FOF 6FX1 6FX2 6FX3 6G0X 6G47 6GVP 6GVR 6H70 6H72 6H9Y 6HA0 6HKU 6HKV 6HTN 6IAL 6IS5 6M8M 6MAP 6MAQ 6MAW 6PWR 6PWS 6PWT 6Q40 6Q6W 6Q6X 6Q77 6Q79 6Q85 6Q86 6Q87 6Q8D 6Q8G 6Q8H 6QLN 6QLO 6QLP 6QLQ 6QLR 6QLS 6QLT 6QLU 6QU6 6QU8 6R35 6R41 6RHL 6RHM 6RYM 6RYN 6S5P 6S5R 6S5S 6S7G 6TID 6TIG 6V1C)

timestamp() {
  date +"%T"
}

echo "$(timestamp): starting PLIP"

cnt=0
while [ $cnt -lt ${#arr[@]} ]; do
pdb=${arr[$cnt]}
echo -ne "${pdb}... "
mkdir ./out/${pdb}
{ # try
python /dartfs-hpc/rc/home/y/f002tsy/cbklab/software/plip/plip/plipcmd.py -i ${pdb} -x --maxthreads 16 -o ./out/${pdb}/ &&
echo "okay"
} || { # catch
1>&2 echo "${pdb} failed" && # print to stderr
echo "failed" && #print to stdout
rmdir ./out/${pdb}
}

let cnt=cnt+1
done

echo "$(timestamp): PLIP done, exiting..."

exit 0
